version: v1
name: foobar
inputs:
  - name: file_contents
    description: File contents to read and write
    type: text
    default: "foobar"
  - name: message_contents
    description: Message contents to write
    type: password
    default: "hello world"
tasks:
- name: write_file
  image: ubuntu:20.04
  run: |
    echo "FOOBAR" > /tmp/run/myFile.txt
  store:
    file:
      - myFile.txt
- name: store_env_var
  image: ubuntu:20.04 
  run: |
    MESSAGE="Hello world"
  store:
    env:
      - MESSAGE
- name: print_file_and_env
  depends_on:
    - write_file
    - store_env_var
  image: ubuntu:20.04
  load:
    env:
      - MESSAGE
    file:
      - myFile.txt
  run: |
    ls /tmp/run
    cat /tmp/run/myFile.txt
    echo "${MESSAGE}"
